<!DOCTYPE html>
<html lang="en" class="group/html">
<head>
{% include "head.liquid" %}
</head>
<body>
{% include "topbar.liquid" %}

<article class="prose prose-lg lg:prose-xl mx-auto px-4 py-8 max-w-4xl">
  <!-- Post Header -->
  <header class="mb-8 not-prose">
    <div class="breadcrumbs text-sm mb-4">
      <ul>
        <li><a href="/" class="link link-hover">Home</a></li>
        <li><a href="/blog/" class="link link-hover">Blog</a></li>
        <li>{{ page.title }}</li>
      </ul>
    </div>

    <h1 class="text-4xl lg:text-5xl font-bold mb-4">{{ page.title }}</h1>

    {% include "post-meta.liquid" %}

    {% if page.description %}
    <p class="text-xl text-base-content/70 mt-4">{{ page.description }}</p>
    {% endif %}
  </header>

  <!-- Post Content -->
  <div class="blog-content">
    {{ page.content }}
  </div>

  <!-- Post Footer -->
  <footer class="not-prose mt-12 pt-8 border-t border-base-300">
    <!-- Tags -->
    {% if page.tags.size > 0 %}
    <div class="mb-6">
      <span class="font-semibold mr-2">Tags:</span>
      {% for tag in page.tags %}
      <a href="/blog/tags/{{ tag | slugify }}/" class="badge badge-outline badge-lg mr-2 mb-2 hover:badge-primary">
        {{ tag }}
      </a>
      {% endfor %}
    </div>
    {% endif %}

    <!-- Navigation to other posts -->
    <div class="flex flex-col sm:flex-row justify-between gap-4 mt-8">
      <a href="/blog/" class="btn btn-outline">
        <span class="iconify lucide--arrow-left size-5 mr-2"></span>
        Back to Blog
      </a>
    </div>
  </footer>
</article>

{% include "footer.liquid" %}
{% include "theme-toggle.liquid" %}

<script src="/assets/js/highlight-all.min.js"></script>
<script>
// Add Oxur-specific keywords to Clojure highlighting
if (hljs && hljs.getLanguage('clojure')) {
  const clojureDef = hljs.getLanguage('clojure');

  hljs.registerLanguage('oxur', function(hljs) {
    // Create a pattern to match Oxur definition forms
    const oxurDefPattern = {
      begin: '\\(\\s*(deffn|defimpl)\\b',
      end: '(\\[|\\{|\\()',
      excludeEnd: true,
      keywords: {
        keyword: 'deffn defimpl'
      },
      contains: [
        {
          className: 'title',
          begin: '[a-zA-Z_\\-!.?+*=<>&#\'][a-zA-Z_\\-!.?+*=<>&#\'0-9/]*',
          relevance: 0
        }
      ]
    };

    // Combine with Clojure contains at the front (higher priority)
    const contains = [oxurDefPattern].concat(clojureDef.contains || []);

    return {
      name: 'Oxur',
      aliases: ['lisp'],
      contains: contains
    };
  });
}
hljs.highlightAll();
</script>
<script src="/assets/js/main.js"></script>
</body>
</html>
